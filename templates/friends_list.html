{% extends 'base.html' %}

{% block title %}Friends{% endblock %}

{% block content %}
<h1>Friends List</h1>

<div>
    <input type="text" id="search-input" placeholder="Search friends by username..." class="form-control mb-3">
</div>

<ul id="search-results" class="list-group">
    <!-- Search results will be appended here -->
</ul>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#search-input').on('input', function() {
            var query = $(this).val();
            $.ajax({
                url: "{% url 'search_friends' %}",
                data: {'q': query},
                success: function(data) {
                    $('#search-results').empty();
                    if (data.length > 0) {
                        data.forEach(function(user) {
                            $('#search-results').append(
                                '<li class="list-group-item"><a href="/profile/' + user.id + '">' + user.username + '</a></li>'
                            );
                        });
                    } else {
                        $('#search-results').append('<li class="list-group-item">No users found.</li>');
                    }
                }
            });
        });
    });
</script>
{% endblock %}
